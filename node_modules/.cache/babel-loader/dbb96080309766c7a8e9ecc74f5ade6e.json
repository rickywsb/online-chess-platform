{"ast":null,"code":"var _jsxFileName = \"/Users/gucenzhang/web-chess/online-chess-react-platform/src/components/Modules/ModuleCard.js\";\nimport React, { useState, useEffect } from 'react';\nimport VideoPlayer from '../VideoPlayer.js'; // Import the VideoPlayer component\nimport { getVideoById } from '../../api/video.js'; // Adjust the import path as needed\n\nimport './ModuleCard.css'; // 假设您有一个CSS文件来样式化卡片\n\nconst ModuleCard = ({\n  module,\n  onEdit,\n  onDelete\n}) => {\n  var _user$result;\n  const [videoUrl, setVideoUrl] = useState('');\n  const user = JSON.parse(localStorage.getItem('user'));\n  const userRole = user === null || user === void 0 ? void 0 : (_user$result = user.result) === null || _user$result === void 0 ? void 0 : _user$result.role; // 注意这里的路径可能需要根据实际的响应结构调整\n  useEffect(() => {\n    const fetchVideo = async () => {\n      try {\n        if (module.videoId) {\n          const videoData = await getVideoById(module.videoId);\n          setVideoUrl(videoData.filePath); // Assuming the video URL is stored in filePath field\n        } else if (module.videoUrl) {\n          setVideoUrl(module.videoUrl); // Directly use the video URL if available\n        }\n      } catch (error) {\n        console.error('Error fetching video:', error);\n      }\n    };\n    fetchVideo();\n  }, [module.videoId, module.videoUrl]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"module-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }\n  }, module.title), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }\n  }, module.description), videoUrl && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"module-video\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(VideoPlayer, {\n    videoUrl: videoUrl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 11\n    }\n  })), (userRole === 'admin' || userRole === 'instructor') && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"module-actions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => onEdit(module),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }\n  }, \"Edit\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => onDelete(module._id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }\n  }, \"Delete\")));\n};\nexport default ModuleCard;","map":{"version":3,"names":["React","useState","useEffect","VideoPlayer","getVideoById","ModuleCard","module","onEdit","onDelete","_user$result","videoUrl","setVideoUrl","user","JSON","parse","localStorage","getItem","userRole","result","role","fetchVideo","videoId","videoData","filePath","error","console","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","title","description","onClick","_id"],"sources":["/Users/gucenzhang/web-chess/online-chess-react-platform/src/components/Modules/ModuleCard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport VideoPlayer from '../VideoPlayer.js'; // Import the VideoPlayer component\nimport { getVideoById } from '../../api/video.js'; // Adjust the import path as needed\n\nimport './ModuleCard.css'; // 假设您有一个CSS文件来样式化卡片\n\nconst ModuleCard = ({ module, onEdit, onDelete }) => {\n  const [videoUrl, setVideoUrl] = useState('');\n  const user = JSON.parse(localStorage.getItem('user'));\n  const userRole = user?.result?.role; // 注意这里的路径可能需要根据实际的响应结构调整\n  useEffect(() => {\n    const fetchVideo = async () => {\n      try {\n        if (module.videoId) {\n          const videoData = await getVideoById(module.videoId);\n          setVideoUrl(videoData.filePath); // Assuming the video URL is stored in filePath field\n        } else if (module.videoUrl) {\n          setVideoUrl(module.videoUrl); // Directly use the video URL if available\n        }\n      } catch (error) {\n        console.error('Error fetching video:', error);\n      }\n    };\n\n    fetchVideo();\n  }, [module.videoId, module.videoUrl]);\n\n  return (\n    <div className=\"module-card\">\n      <h3>{module.title}</h3>\n      <p>{module.description}</p>\n      {videoUrl && (\n        <div className=\"module-video\">\n          <VideoPlayer videoUrl={videoUrl} />\n        </div>\n      )}\n        {(userRole === 'admin' || userRole === 'instructor') && (\n          <div className=\"module-actions\">\n            <button onClick={() => onEdit(module)}>Edit</button>\n            <button onClick={() => onDelete(module._id)}>Delete</button>\n          </div>\n        )}\n\n    </div>\n  );\n};\n\nexport default ModuleCard;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}