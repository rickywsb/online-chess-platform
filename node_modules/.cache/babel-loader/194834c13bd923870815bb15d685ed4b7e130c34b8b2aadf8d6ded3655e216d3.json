{"ast":null,"code":"// api/admin.js\nimport axios from 'axios';\nconst API_BASE_URL = \"https://online-chess-platform-7f442b10751d.herokuapp.com/api\" || process.env.REACT_APP_API_BASE_URL; // 或您的后端服务器地址\n\n// 获取认证令牌的函数\nconst getAuthConfig = () => {\n  const token = localStorage.getItem('token'); // 从本地存储获取令牌\n  return {\n    headers: {\n      Authorization: `Bearer ${token}` // 在请求头中包含令牌\n    }\n  };\n};\n\n// 获取所有用户的函数\nexport const fetchUsers = async () => {\n  try {\n    const config = getAuthConfig();\n    const response = await axios.get(`${API_BASE_URL}/api/users`, config);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching users:', error);\n    throw error;\n  }\n};\n\n// 更新用户角色的函数\nexport const updateUserRole = async (userId, newRole) => {\n  try {\n    const config = getAuthConfig();\n    const response = await axios.patch(`${API_BASE_URL}/api/user/${userId}/role`, {\n      newRole\n    }, config);\n    return response.data;\n  } catch (error) {\n    console.error('Error updating user role:', error);\n    throw error;\n  }\n};","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","getAuthConfig","token","localStorage","getItem","headers","Authorization","fetchUsers","config","response","get","data","error","console","updateUserRole","userId","newRole","patch"],"sources":["/Users/gucenzhang/web-chess/online-chess-react-platform/src/api/admin.js"],"sourcesContent":["// api/admin.js\nimport axios from 'axios';\n\nconst API_BASE_URL = \"https://online-chess-platform-7f442b10751d.herokuapp.com/api\" || process.env.REACT_APP_API_BASE_URL; // 或您的后端服务器地址\n\n// 获取认证令牌的函数\nconst getAuthConfig = () => {\n  const token = localStorage.getItem('token'); // 从本地存储获取令牌\n  return {\n    headers: {\n      Authorization: `Bearer ${token}` // 在请求头中包含令牌\n    }\n  };\n};\n\n// 获取所有用户的函数\nexport const fetchUsers = async () => {\n  try {\n    const config = getAuthConfig();\n    const response = await axios.get(`${API_BASE_URL}/api/users`, config);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching users:', error);\n    throw error;\n  }\n};\n\n// 更新用户角色的函数\nexport const updateUserRole = async (userId, newRole) => {\n  try {\n    const config = getAuthConfig();\n    const response = await axios.patch(`${API_BASE_URL}/api/user/${userId}/role`, { newRole }, config);\n    return response.data;\n  } catch (error) {\n    console.error('Error updating user role:', error);\n    throw error;\n  }\n};\n"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,YAAY,GAAG,8DAA8D,IAAIC,OAAO,CAACC,GAAG,CAACC,sBAAsB,CAAC,CAAC;;AAE3H;AACA,MAAMC,aAAa,GAAGA,CAAA,KAAM;EAC1B,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;EAC7C,OAAO;IACLC,OAAO,EAAE;MACPC,aAAa,EAAG,UAASJ,KAAM,EAAC,CAAC;IACnC;EACF,CAAC;AACH,CAAC;;AAED;AACA,OAAO,MAAMK,UAAU,GAAG,MAAAA,CAAA,KAAY;EACpC,IAAI;IACF,MAAMC,MAAM,GAAGP,aAAa,CAAC,CAAC;IAC9B,MAAMQ,QAAQ,GAAG,MAAMb,KAAK,CAACc,GAAG,CAAE,GAAEb,YAAa,YAAW,EAAEW,MAAM,CAAC;IACrE,OAAOC,QAAQ,CAACE,IAAI;EACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;IAC7C,MAAMA,KAAK;EACb;AACF,CAAC;;AAED;AACA,OAAO,MAAME,cAAc,GAAG,MAAAA,CAAOC,MAAM,EAAEC,OAAO,KAAK;EACvD,IAAI;IACF,MAAMR,MAAM,GAAGP,aAAa,CAAC,CAAC;IAC9B,MAAMQ,QAAQ,GAAG,MAAMb,KAAK,CAACqB,KAAK,CAAE,GAAEpB,YAAa,aAAYkB,MAAO,OAAM,EAAE;MAAEC;IAAQ,CAAC,EAAER,MAAM,CAAC;IAClG,OAAOC,QAAQ,CAACE,IAAI;EACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;IACjD,MAAMA,KAAK;EACb;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}