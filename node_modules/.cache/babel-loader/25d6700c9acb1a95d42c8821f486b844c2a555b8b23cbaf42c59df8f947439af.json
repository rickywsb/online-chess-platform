{"ast":null,"code":"import axios from 'axios';\nREACT_APP_API_URL;\nconsole.log('API URL:', process.env.REACT_APP_API_URL); // 这将打印出环境变量的值，以便于调试\nconsole.log('API URL:', process.env.REACT_APP_API_BASE_URL); // 这将打印出环境变量的值，以便于调试\n\nconst API_URL = process.env.REACT_APP_API_URL;\nexport const loginUser = async (email, password) => {\n  try {\n    const response = await axios.post(`${API_URL}/auth/login`, {\n      email,\n      password\n    });\n    if (response.data.token) {\n      localStorage.setItem('user', JSON.stringify(response.data));\n      localStorage.setItem('userId', response.data.result._id); // 确保从响应中提取 _id\n    }\n\n    return response.data;\n    console.log(response.data); // 添加这行来检查响应数据\n  } catch (error) {\n    throw error;\n  }\n};\n\n// Add Register User Function\nexport const registerUser = async (username, email, password, phoneNumber) => {\n  try {\n    const response = await axios.post(`${API_URL}/auth/register`, {\n      username,\n      email,\n      password,\n      phoneNumber,\n      // 确保 phoneNumber 被包括在请求体中\n\n      role: 'student' // 设置默认角色为学生\n    });\n    // 这里你可以根据需要处理响应，例如保存用户数据或直接登录用户\n    return response.data;\n  } catch (error) {\n    // 这里处理错误，例如显示错误消息\n    throw error;\n  }\n};\n\n// 登出用户\nexport const logoutUser = () => {\n  // 移除存储的用户信息和 token\n  localStorage.removeItem('user');\n  localStorage.removeItem('userId');\n};","map":{"version":3,"names":["axios","REACT_APP_API_URL","console","log","process","env","REACT_APP_API_BASE_URL","API_URL","loginUser","email","password","response","post","data","token","localStorage","setItem","JSON","stringify","result","_id","error","registerUser","username","phoneNumber","role","logoutUser","removeItem"],"sources":["/Users/gucenzhang/web-chess/online-chess-react-platform/src/api/auth.js"],"sourcesContent":["import axios from 'axios';\nREACT_APP_API_URL\n\nconsole.log('API URL:', process.env.REACT_APP_API_URL); // 这将打印出环境变量的值，以便于调试\nconsole.log('API URL:', process.env.REACT_APP_API_BASE_URL); // 这将打印出环境变量的值，以便于调试\n\n\nconst API_URL = process.env.REACT_APP_API_URL;\n\nexport const loginUser = async (email, password) => {\n  try {\n    const response = await axios.post(`${API_URL}/auth/login`, { email, password });\n    if (response.data.token) {\n      localStorage.setItem('user', JSON.stringify(response.data));\n      localStorage.setItem('userId', response.data.result._id); // 确保从响应中提取 _id\n\n    }\n    return response.data;\n    console.log(response.data); // 添加这行来检查响应数据\n  } catch (error) {\n    throw error;\n  }\n};\n\n// Add Register User Function\nexport const registerUser = async (username, email, password, phoneNumber) => {\n    try {\n      const response = await axios.post(`${API_URL}/auth/register`, {\n        username,\n        email,\n        password,\n        phoneNumber, // 确保 phoneNumber 被包括在请求体中\n\n        role: 'student' // 设置默认角色为学生\n      });\n      // 这里你可以根据需要处理响应，例如保存用户数据或直接登录用户\n      return response.data;\n    } catch (error) {\n      // 这里处理错误，例如显示错误消息\n      throw error;\n    }\n  };\n\n  // 登出用户\nexport const logoutUser = () => {\n  // 移除存储的用户信息和 token\n  localStorage.removeItem('user');\n  localStorage.removeItem('userId');\n};\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzBC,iBAAiB;AAEjBC,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEC,OAAO,CAACC,GAAG,CAACJ,iBAAiB,CAAC,CAAC,CAAC;AACxDC,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEC,OAAO,CAACC,GAAG,CAACC,sBAAsB,CAAC,CAAC,CAAC;;AAG7D,MAAMC,OAAO,GAAGH,OAAO,CAACC,GAAG,CAACJ,iBAAiB;AAE7C,OAAO,MAAMO,SAAS,GAAG,MAAAA,CAAOC,KAAK,EAAEC,QAAQ,KAAK;EAClD,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMX,KAAK,CAACY,IAAI,CAAE,GAAEL,OAAQ,aAAY,EAAE;MAAEE,KAAK;MAAEC;IAAS,CAAC,CAAC;IAC/E,IAAIC,QAAQ,CAACE,IAAI,CAACC,KAAK,EAAE;MACvBC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACP,QAAQ,CAACE,IAAI,CAAC,CAAC;MAC3DE,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAEL,QAAQ,CAACE,IAAI,CAACM,MAAM,CAACC,GAAG,CAAC,CAAC,CAAC;IAE5D;;IACA,OAAOT,QAAQ,CAACE,IAAI;IACpBX,OAAO,CAACC,GAAG,CAACQ,QAAQ,CAACE,IAAI,CAAC,CAAC,CAAC;EAC9B,CAAC,CAAC,OAAOQ,KAAK,EAAE;IACd,MAAMA,KAAK;EACb;AACF,CAAC;;AAED;AACA,OAAO,MAAMC,YAAY,GAAG,MAAAA,CAAOC,QAAQ,EAAEd,KAAK,EAAEC,QAAQ,EAAEc,WAAW,KAAK;EAC1E,IAAI;IACF,MAAMb,QAAQ,GAAG,MAAMX,KAAK,CAACY,IAAI,CAAE,GAAEL,OAAQ,gBAAe,EAAE;MAC5DgB,QAAQ;MACRd,KAAK;MACLC,QAAQ;MACRc,WAAW;MAAE;;MAEbC,IAAI,EAAE,SAAS,CAAC;IAClB,CAAC,CAAC;IACF;IACA,OAAOd,QAAQ,CAACE,IAAI;EACtB,CAAC,CAAC,OAAOQ,KAAK,EAAE;IACd;IACA,MAAMA,KAAK;EACb;AACF,CAAC;;AAED;AACF,OAAO,MAAMK,UAAU,GAAGA,CAAA,KAAM;EAC9B;EACAX,YAAY,CAACY,UAAU,CAAC,MAAM,CAAC;EAC/BZ,YAAY,CAACY,UAAU,CAAC,QAAQ,CAAC;AACnC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}